# 更改记录
## V2.1.1
- [!]修复jueying_pgo包中，outdoor模式因参数文件中未指定参数导致回环检测实效的问题
- [!]修复地图default目录原本指向的目录被删除时，无法成功创建新的default软链接导致无法生成地图的问题

## V2.1.0
- [+]增加jueying_pgo包，使用里程计和关键帧进行建图后端图优化（不使用动态地图加载）
- [!]jueying_pgo包增加一个rostopic接口用于手动指定当前关键帧标签值
- [!]jueying_pgo包中，indoor和outdoor设置不同参数文件
- [!]建图支持fast/indoor/outdoor三种模式，其中fast只启动jueying_lio进行建图，indoor与outdoor都启动jueying_lio和jueying_pgo进行建图
- [+]增加动态地图加载包，包括一些从关键帧点云构建完整点云地图的程序，并增加相应启动脚本
- [!]栅格地图构建程序中的离线构建方法，支持读取额外一个标签文件，按标签值构建多张栅格地图
- [!]优化启动脚本

## V2.0.4
- [!]涉及到雷达类型的参数，统一在参数文件中配置，不通过启动脚本传参的方式
- [!]deb安装脚本中，根据system/conf下的lidar_type，将对应的参数文件放入system/conf对应位置下并统一名称
- [!]调整启动脚本，增加一个统一的启动建图功能的脚本，分别打开点云图和栅格图建图脚本
- [!]修改建图程序，接收地图保存路径参数
- [!]修改建图启动脚本，可根据输入文件夹名，创建路径并将路径传入建图程序
- [!]优化建多张栅格地图的启动及指定文件名方法，不指定文件名情况下会自己确定一个更大序号的文件名

## V2.0.3
- [!]速腾雷达的接收topic和frame分别修改为：lidar_points和lidar_link

## V2.0.2
- [!]occupancy_mapping包中，在程序结束时调用保存地图函数，自动保存栅格地图，无需手动调用保存地图脚本。
- [!]occupancy_mapping包，添加对livox雷达自定义格式的支持。
- [!]部分包CMakelist中区分arm与x86编译选项。
- [!]去掉rs_to_velodyne包中按box过滤点的部分，因其可能导致内存越界访问。

## V2.0.1
- [!]将建图定位包分成建图和定位两个功能包，此功能包为建图包，名称为slam;

## V1.1.6
- [!]机器人身体坐标系，统一改为base_link。
- [!]解决rs_to_velodyne和jueying_lio对rslidar的报错问题，驱动给出的点云话题的intensity属性为float格式，而非以前版本驱动的uint8格式。
- [!]保存栅格地图脚本save_map.sh，增加保存文件名的参数，默认为“jueying”。
- [!]发布栅格地图脚本pub_occ_map.sh，不调用该脚本对应的stop脚本。
- [!]jueying_lio中，livox.yaml中增加保存地图路径的参数。
- [!]为livox_repub编辑启动及停止脚本，在localization.sh中根据指定的雷达类型参数，判断是否需要开启livox_repub。
- [!]jueying_localization的launch文件中，将参数改为从参数文件中获取。
- [!]jueying_localization增加参数文件config/params.yaml。
- [!]jueying_localization程序适配从参数文件获取参数的方式。
- [!]jueying_localization程序输出的退化检测指标ndt的最大特征值，只在获取这个值时才计算，而非原本的每一帧都计算。
- [!]为pcd2map增加一个参数的配置文件。
- [!]所有通过加载配置文件来加载参数的功能包，首先从本功能包下加载配置文件，之后加载/home/ysc/jy_cog/system/conf/slam下对应包文件夹下的参数文件。

## V1.1.5
- [!]定位包中ukf的imu和odom的过程噪声协方差值，之前某次更新中有修改，现恢复到以前的值。
- [!]occupancy_mapping包中增加点云队列长度，增加tf监听缓冲区时间长度。

## V1.1.4
- [!]优化map_server包中的-nan字符。
- [+]兼容四livox激光雷达

## V1.1.3
- [!]优化localization_detection中的判断逻辑。定位丢失判断不变，仍为里程计误差异常+其余三个判断标志任意一个异常；判断为丢失后，恢复正常的标志为里程计误差正常+其余三个判断标志也均正常。具体的判断指标的阈值，应根据不同的现场环境选取，以尽量减少误报。
- [!]localization_detection中的定位状态消息：/location_status，消息名和格式类型不变，msg.data为1定位丢失，msg.data为0为定位正常。（去除原本的每一二进制位表示某个指标正常与否）

## V1.1.2
- [!]jueying_lio添加对robosense雷达的支持，指定雷达话题为rslidar即可，建图程序接收/rslidar_points话题，不再需要开启rs_to_velodyne包。
- [!]odometry_republisher中监听nav_msgs/Odometry格式的/odom话题，指定ros::TransportHints().tcpNoDelay()方式，避免有延迟。

## V1.1.1
- [!]优化在线生成栅格地图包：适配斜向安装的雷达；去除生成地图后周围多余的空白区域；解决无点云时直接调用发布地图服务导致访问空的地图根指针的段错误bug等。
- [!]替换map_server包，以支持切换地图的功能。

## V1.1.0 COS2
- [!]修改狭窄区域建图方法
- [!]修改launch以及config等配置文件
- [+]增加地图保存路径参数

## V1.0.10 COS2
- [-]去除原来的定位丢失状态判断
- [!]修改定位包中一些内容，在/status中输出用于定位状态判断的一些指标（最大特征值等）
- [!]修改定位包中一些内容，输出的/odom可以给出协方差（暂时注释掉了，因为没用到）
- [!]修改ndt_omp包中一些内容，输出用于定位状态判断的一些指标（最大特征值等）
- [+]增加一个新的定位丢失判断包，输入/odom，/leg_odom和/status，输出/location_status，类型为std_msgs::Int8，大于64即为定位丢失。（每个二进制位代表一种判断指标状态，第七位表示最终的定位丢失状态）

## COS2 (V1.0.9)
- [!]适配感知镜像cos2，修改若干包的位置、名字路径
- [!]增删改若干包的启动launch，去除包内发布tf，
- [!]为打包为deb，修改所有功能包的CMakeList.txt，增加install相关内容，增加config.cmake文件。

## V1.0.9

- [!]修改实时生成栅格地图程序，并修改README中操作说明
- [!]修改jueying_slam中禾赛激光雷达的外参
- [!]优化机器人初始定位状态的判断
## V1.0.8
- [+]增加对禾赛128线激光雷达的支持
## V1.0.7
- [!]修改定位状态的接口，增加定位正常的输出接口
## V1.0.6
- [!]修改定位丢失判定参数，使准确率更高
- [!]解决建图算法安装库问题
## V1.0.5
- [!]修改定位丢失判断依据，使准确率更高
- [!]修改第三方依赖库安装位置
- [!]修改实时生成栅格地图程序以及操作手册
- [!]优化去除机器狗本体点云程序
## V1.0.4
- [!]修改定位丢失误判的问题
- [!]修改定位和导航同时启动激光雷达到机器狗身体坐标tf产生冲突的问题
- [+]增加实时SLAM生成栅格地图程序 
